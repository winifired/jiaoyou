{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/交友(城市猎人app)/components/chat/inputbar/suit/videoComp/videoComp.vue?56ad","webpack:///C:/Users/Administrator/Desktop/交友(城市猎人app)/components/chat/inputbar/suit/videoComp/videoComp.vue?be5b","webpack:///C:/Users/Administrator/Desktop/交友(城市猎人app)/components/chat/inputbar/suit/videoComp/videoComp.vue?96ee","webpack:///C:/Users/Administrator/Desktop/交友(城市猎人app)/components/chat/inputbar/suit/videoComp/videoComp.vue?0fa1","uni-app:///components/chat/inputbar/suit/videoComp/videoComp.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmmB,CAAgB,6nBAAG,EAAC,C;;;;;;;;;;;;;;;;;ACKvnB;AACA;AACA;AACA,yE;;AAEA;AACA,MADA,kBACA;AACA;AACA,GAHA;;AAKA,gBALA;AAMA;AACA;AACA,kBADA;AAEA,+CAFA,EADA;;AAKA;AACA,kBADA;AAEA,2CAFA,EALA,EANA;;;AAgBA;AACA,eADA,yBACA;AACA;AACA,KAHA;;AAKA,kBALA,4BAKA;AACA;AACA,KAPA;;AASA;AACA,aAVA,uBAUA;AACA;AACA;AACA;AACA,uCADA;AAEA,uBAFA;AAGA,sBAHA;AAIA,eAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA;AACA;AACA,4EAFA;AAGA,mCAHA;AAIA,wBAJA;AAKA;AACA,mDADA;AAEA,8CAFA,EALA;;AASA,mBATA,mBASA,GATA,EASA;AACA;AACA;AACA,gDAHA,CAGA;AACA;AACA;AACA,2CADA;AAEA,kCAFA;AAGA;AACA,qCADA;AAEA,mEAFA;AAGA,iCAHA;AAIA,yCAJA;AAKA,oCALA,EAHA;;AAUA,wCAVA;AAWA,uCAXA;AAYA,+BAZA;AAaA,qCAbA;AAcA;AACA;AACA,iBAhBA;;AAkBA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,mCAFA;;AAIA;AACA,aAzCA;;AA2CA,SAlDA;;AAoDA,KAjEA;AAkEA,eAlEA,uBAkEA,GAlEA,EAkEA;AACA;AACA,KApEA,EAhBA;;;AAuFA;AACA,SAxFA,qBAwFA,EAxFA;;AA0FA,aA1FA,yBA0FA,EA1FA;;AA4FA,OA5FA,mBA4FA,EA5FA;;AA8FA,WA9FA,uBA8FA,EA9FA;;AAgGA,SAhGA,qBAgGA,EAhGA,E","file":"components/chat/inputbar/suit/videoComp/videoComp.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./videoComp.vue?vue&type=template&id=9eeba666&\"\nvar renderjs\nimport script from \"./videoComp.vue?vue&type=script&lang=js&\"\nexport * from \"./videoComp.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/chat/inputbar/suit/videoComp/videoComp.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./videoComp.vue?vue&type=template&id=9eeba666&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./videoComp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./videoComp.vue?vue&type=script&lang=js&\"","<template>\n  <div></div>\n</template>\n\n<script>\nlet WebIM = require(\"../../../../../utils/WebIM\")[\"default\"];\nlet msgType = require(\"../../../msgtype\");\nlet msgStorage = require(\"../../../msgstorage\");\nlet disp = require(\"../../../../../utils/broadcast\");\n\nexport default {\n  data() {\n    return {};\n  },\n\n  components: {},\n  props: {\n    username: {\n      type: Object,\n      default: () => ({}),\n    },\n    chatType: {\n      type: String,\n      default: msgType.chatType.SINGLE_CHAT,\n    },\n  },\n  methods: {\n    isGroupChat() {\n      return this.chatType == msgType.chatType.CHAT_ROOM;\n    },\n\n    getSendToParam() {\n      return this.isGroupChat() ? this.username.groupId : this.username.your;\n    },\n\n    // 未启用\n    sendVideo() {\n      var me = this;\n      var token = WebIM.conn.context.accessToken;\n      uni.chooseVideo({\n        sourceType: [\"album\", \"camera\"],\n        maxDuration: 60,\n        camera: \"back\",\n        success(res) {\n          var tempFilePaths = res.tempFilePath;\n          var str = WebIM.config.appkey.split(\"#\");\n          uni.uploadFile({\n            url:\n              \"https://a1.easemob.com/\" + str[0] + \"/\" + str[1] + \"/chatfiles\",\n            filePath: tempFilePaths,\n            name: \"file\",\n            header: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: \"Bearer \" + token,\n            },\n            success(res) {\n              var data = res.data;\n              var dataObj = JSON.parse(data);\n              var id = WebIM.conn.getUniqueId(); // 生成本地消息id\n              var msg = new WebIM.message(msgType.VIDEO, id);\n              msg.set({\n                apiUrl: WebIM.config.apiURL,\n                accessToken: token,\n                body: {\n                  type: msgType.VIDEO,\n                  url: dataObj.uri + \"/\" + dataObj.entities[0].uuid,\n                  filetype: \"mp4\",\n                  filename: tempFilePaths,\n\t\t\t\t\t\t\t\t\taccessToken: token,\n                },\n                from: me.username.myName,\n                to: me.getSendToParam(),\n                roomType: false,\n                chatType: me.chatType,\n                success: function (argument) {\n\t\t\t\t\t\t\t\t\tdisp.fire('em.chat.sendSuccess', id);\n\t\t\t\t\t\t\t\t}\n              });\n              if (me.isGroupChat()) {\n                msg.setGroup(\"groupchat\");\n              }\n              WebIM.conn.send(msg.body);\n              let obj = {\n                msg: msg,\n                type: msgType.VIDEO,\n              };\n              me.saveSendMsg(obj);\n            },\n          });\n        },\n      });\n    },\n    saveSendMsg(evt) {\n      msgStorage.saveMsg(evt.msg, evt.type);\n    },\n  },\n\n  // lifetimes\n  created() {},\n\n  beforeMount() {},\n\n  moved() {},\n\n  destroyed() {},\n\n  mounted() {},\n};\n</script>\n\n"],"sourceRoot":""}